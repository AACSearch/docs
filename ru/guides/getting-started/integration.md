# Интеграция

Интеграция AACSearch в ваше приложение или веб-сайт — это последний шаг для включения мощной функциональности поиска для ваших пользователей. Это руководство проведет вас через процесс подключения AACSearch к вашему проекту с использованием API-ключей и SDK, позволяя выполнять поиск, отображать результаты и улучшать пользовательский опыт с помощью возможностей поиска в реальном времени.

## Предварительные условия

Перед интеграцией AACSearch убедитесь, что вы выполнили следующие условия:

- **Настройка аккаунта**: У вас есть активный аккаунт AACSearch. Если нет, следуйте руководству [Настройка аккаунта](../getting-started/account-setup.md).
- **Создание индекса**: Вы создали хотя бы один индекс. Если нет, следуйте руководству [Первый индекс](../getting-started/first-index.md).
- **Загрузка данных**: Вы загрузили данные в ваш индекс. Если нет, следуйте руководству [Загрузка данных](../getting-started/data-upload.md).
- **API-ключ**: Вы сгенерировали API-ключ с соответствующими разрешениями. Смотрите [Настройка аккаунта](../getting-started/account-setup.md) для генерации API-ключей.
- **Доступ к панели управления**: Войдите в [Панель управления AACSearch](https://dashboard.aacsearch.com) с вашими учетными данными, чтобы получить необходимую информацию.

## Шаг 1: Выберите метод интеграции

AACSearch предлагает несколько способов интеграции функциональности поиска в зависимости от потребностей вашего проекта и технических навыков:

1. **Прямая интеграция через API**: Используйте RESTful конечные точки API для программного взаимодействия с AACSearch. Этот метод идеален для пользовательских реализаций и полного контроля над поведением поиска.
2. **SDK и библиотеки**: Используйте готовые SDK для популярных языков программирования и фреймворков (например, JavaScript, Python, React, Vue) для упрощения интеграции. Это рекомендуется для более быстрой разработки и удобства использования.
3. **UI-компоненты**: Используйте готовые UI-компоненты для веб-фреймворков, таких как React или Vue, чтобы быстро добавить интерфейсы поиска без необходимости создания с нуля.
4. **Плагины для CMS**: Используйте плагины для систем управления контентом, таких как WordPress или Shopify, чтобы интегрировать поиск без написания кода.

Это руководство сосредоточено на прямой интеграции через API и использовании SDK, так как это наиболее распространенные подходы. Для плагинов CMS или специфических интеграций с фреймворками обратитесь к разделу [Интеграции](../../integrations/README.md).

## Шаг 2: Настройте аутентификацию

Все взаимодействия с AACSearch требуют аутентификации через API-ключ:

1. **Получите ваш API-ключ**: В Панели управления AACSearch перейдите к разделу "API-ключи" в "Настройках". Скопируйте существующий ключ с необходимыми разрешениями (например, доступ на чтение для операций поиска).
   - **Примечание**: Относитесь к вашему API-ключу как к паролю. Не раскрывайте его в клиентском коде для публичных приложений. Для веб-приложений используйте серверный прокси или безопасное управление ключами. Смотрите [Управление API-ключами](../security/api-keys.md) для лучших практик безопасности.
2. **Добавьте в запросы**: Добавляйте API-ключ к каждому запросу в виде заголовка:
   ```
   X-API-Key: your-api-key
   ```

## Шаг 3: Выполните ваш первый поиск с помощью API

Чтобы протестировать интеграцию, сделайте простой поисковый запрос к вашему индексу с использованием API AACSearch:

1. **Определите ваш индекс**: Запомните имя индекса, который вы хотите искать (например, "продукты").
2. **Составьте поисковый запрос**: Используйте конечную точку `GET /search` с параметрами запроса для поискового термина и имени индекса.
   - **Пример с использованием `curl`**:
     ```bash
     curl -X GET "https://api.aacsearch.com/search" \
       -H "X-API-Key: your-api-key" \
       -G \
       -d "q=смартфон" \
       -d "index=продукты"
     ```
   - **Ожидаемый ответ** (упрощенный JSON):
     ```json
     {
       "hits": [
         {
           "id": "1",
           "title": "Смартфон Модель X",
           "description": "Последняя модель с продвинутыми функциями.",
           "category": "электроника",
           "price": 699.99
         },
         {
           "id": "2",
           "title": "Смартфон Модель Y",
           "description": "Доступный смартфон с отличной производительностью.",
           "category": "электроника",
           "price": 399.99
         }
       ],
       "nbHits": 2,
       "page": 1,
       "nbPages": 1,
       "hitsPerPage": 20,
       "processingTimeMS": 2,
       "query": "смартфон"
     }
     ```
3. **Проверьте ответ**: Убедитесь, что вы получили ответ с результатами поиска (`hits`). Если вы столкнулись с ошибками (например, `401 Unauthorized`), проверьте ваш API-ключ и разрешения. Если результаты не возвращаются, убедитесь, что ваш индекс содержит соответствующие данные.

Для подробных параметров поиска (например, фильтров, фасетов) обратитесь к документации [Search API](../../api/search.md).

## Шаг 4: Интеграция с SDK (Необязательно)

Использование SDK может упростить взаимодействие с API, обрабатывая аутентификацию, форматирование запросов и разбор ответов. AACSearch предоставляет SDK для нескольких языков и фреймворков:

1. **Установите SDK**: Выберите подходящий SDK для вашего проекта и установите его.

   - **Пример SDK для JavaScript** (для Node.js или браузера):
     Установите через npm:
     ```bash
     npm install aacsearch-js
     ```
   - Инициализируйте клиент:

     ```javascript
     import AACSearch from "aacsearch-js";

     const client = new AACSearch({
       apiKey: "your-api-key",
       baseUrl: "https://api.aacsearch.com",
     });
     ```

2. **Выполните поиск**:
   - Используйте SDK для поиска в вашем индексе:
     ```javascript
     client
       .search({
         index: "продукты",
         q: "смартфон",
       })
       .then((response) => {
         console.log(response.hits); // Массив результатов поиска
       })
       .catch((error) => {
         console.error("Ошибка поиска:", error);
       });
     ```
3. **Изучите возможности SDK**: SDK часто включают вспомогательные методы для распространенных задач, таких как автодополнение, фильтрация и пагинация. Смотрите [Документацию SDK](../../sdk/installation.md) для полного списка возможностей.

## Шаг 5: Создайте пользовательский интерфейс поиска

Чтобы сделать результаты поиска доступными для пользователей, создайте интерфейс поиска:

1. **Базовая форма поиска**: Добавьте поле ввода поиска в ваше приложение или веб-сайт, где пользователи могут вводить запросы.
   - **Пример HTML**:
     ```html
     <form id="search-form">
       <input
         type="text"
         id="search-input"
         placeholder="Поиск продуктов..."
         autocomplete="off"
       />
       <button type="submit">Поиск</button>
     </form>
     <div id="search-results"></div>
     ```
2. **Обработка ввода пользователя**: Захватывайте запрос пользователя и отправляйте его в AACSearch через API или SDK.

   - **Пример JavaScript** (используя SDK):

     ```javascript
     document
       .getElementById("search-form")
       .addEventListener("submit", function (e) {
         e.preventDefault();
         const query = document.getElementById("search-input").value;
         client
           .search({
             index: "продукты",
             q: query,
           })
           .then((response) => {
             displayResults(response.hits);
           });
       });

     function displayResults(hits) {
       const resultsDiv = document.getElementById("search-results");
       resultsDiv.innerHTML = "";
       if (hits.length === 0) {
         resultsDiv.innerHTML = "<p>Результаты не найдены.</p>";
         return;
       }
       const ul = document.createElement("ul");
       hits.forEach((hit) => {
         const li = document.createElement("li");
         li.innerHTML = `<strong>${hit.title}</strong> - ${hit.description} (${hit.category}, $${hit.price})`;
         ul.appendChild(li);
       });
       resultsDiv.appendChild(ul);
     }
     ```

3. **Улучшите с помощью функций**: Добавьте автодополнение, фильтры или пагинацию для повышения удобства использования. Смотрите [Автодополнение](../search/autocomplete.md) и [Фасетный поиск](../search/facets.md) для продвинутых функций UI.

## Шаг 6: Протестируйте вашу интеграцию

Перед развертыванием в продакшен тщательно протестируйте вашу интеграцию поиска:

1. **Тестируйте различные запросы**: Попробуйте разные поисковые термины, включая краевые случаи (например, пустые запросы, специальные символы, длинные фразы), чтобы убедиться в стабильных результатах.
2. **Проверьте производительность**: Убедитесь, что ответы на поиск достаточно быстры для вашего случая использования. Если медленно, оптимизируйте ваш индекс или запросы. Смотрите [Оптимизация запросов](../performance/queries.md).
3. **Проверьте результаты**: Убедитесь, что возвращаемые результаты соответствуют ожиданиям на основе ваших данных и конфигурации поиска. При необходимости настройте параметры релевантности. Смотрите [Настройка релевантности](../search/relevance.md).
4. **Симулируйте поведение пользователя**: Протестируйте полный путь пользователя от ввода запроса до просмотра результатов, чтобы обеспечить бесшовный опыт.

## Лучшие практики для интеграции

- **Безопасность API-ключей**: Избегайте раскрытия API-ключей в клиентском коде. Используйте переменные окружения или серверный прокси для безопасного хранения ключей.
- **Обработка ошибок**: Реализуйте обработку ошибок для сбоев API (например, проблемы с сетью, ограничения скорости) и отображайте понятные сообщения для пользователей. Смотрите [Ошибки API](../../troubleshooting/api-errors.md).
- **Оптимизация скорости**: Кэшируйте частые результаты поиска, если это уместно, чтобы уменьшить количество вызовов API и улучшить время ответа. Смотрите [Стратегии кэширования](../performance/caching.md).
- **Мониторинг использования**: Отслеживайте использование API и аналитику поиска в панели управления, чтобы выявить узкие места или области для улучшения. Смотрите [Аналитика и инсайты](../dashboard/analytics.md).
- **Соблюдение лимитов скорости**: Учитывайте ограничения скорости API, чтобы избежать сбоев. Группируйте запросы или реализуйте логику повторных попыток для ошибок `429 Too Many Requests`. Смотрите [Ограничение запросов](../security/rate-limiting.md).

## Следующие шаги

С интегрированным AACSearch в ваше приложение, изучите дополнительные функции для улучшения функциональности поиска:

- **[Настройка поиска](../dashboard/search-config.md)**: Точно настройте параметры поиска, такие как релевантность, синонимы и толерантность к опечаткам для лучших результатов.
- **[Автодополнение](../search/autocomplete.md)**: Добавьте предложения в реальном времени по мере ввода пользователя для улучшения удобства поиска.
- **[Аналитика и инсайты](../dashboard/analytics.md)**: Используйте аналитику поиска для понимания поведения пользователей и оптимизации производительности.
- **[Продвинутые темы](../../advanced/README.md)**: Погрузитесь в машинное обучение, векторный поиск и пользовательское ранжирование для передовых возможностей поиска.

## Устранение неисправностей

Если вы столкнулись с проблемами во время интеграции:

- **Ошибки аутентификации**: Если вы получаете ошибку `401 Unauthorized`, убедитесь, что ваш API-ключ правильный и имеет необходимые разрешения. Сгенерируйте новый ключ, если это необходимо.
- **Результаты не возвращаются**: Убедитесь, что ваш индекс содержит данные и запрос соответствует содержимому. Проверьте атрибуты для поиска в настройках индекса.
- **Медленное время ответа**: Оптимизируйте ваши запросы или конфигурацию индекса. Большие наборы данных или сложные фильтры могут влиять на скорость. Смотрите [Оптимизация запросов](../performance/queries.md).
- **Проблемы с установкой SDK**: Если SDK не устанавливается или не работает, проверьте совместимость версии с вашим проектом или переустановите зависимости. Смотрите [Устранение неполадок SDK](../../troubleshooting/sdk.md).
- **Свяжитесь с поддержкой**: Для дальнейшей помощи обратитесь в нашу службу поддержки через [community.aacsearch.com](https://community.aacsearch.com) или по email support@aacsearch.com.

## Дополнительные ресурсы

- [Панель управления AACSearch](https://dashboard.aacsearch.com) - Управляйте API-ключами и отслеживайте интеграцию.
- [Быстрый старт API](../../api/quickstart.md) - Быстрая справка для начала работы с интеграцией API.
- [Справочник API по поиску](../../api/search.md) - Подробная документация по параметрам поиска и ответам.
- [Документация SDK](../../sdk/installation.md) - Руководства по установке и использованию SDK AACSearch.
- [Форум сообщества](https://community.aacsearch.com) - Общайтесь с другими разработчиками для получения советов и решений по интеграции.
