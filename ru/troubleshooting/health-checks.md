# Проверки состояния в AACSearch

Этот документ описывает, как использовать проверки состояния для мониторинга и диагностики проблем с AACSearch.

## Проверка состояния API

**Описание**: Проверка состояния API позволяет убедиться, что ваш API-ключ и доступ к сервису работают корректно.

**Шаги**:

1. Выполните простой GET-запрос к эндпоинту `/health` или аналогичному для проверки состояния API.
   ```bash
   curl -X GET "https://api.aacsearch.com/health" \
     -H "X-API-Key: ваш-api-ключ"
   ```
2. Проверьте код ответа. Код 200 указывает на нормальную работу API.
3. Если вы получаете ошибку (например, 401 или 503), проверьте ваш API-ключ или статус сервиса на [Status Page](https://status.aacsearch.com).

## Проверка состояния индекса

**Описание**: Проверка состояния индекса помогает убедиться, что данные доступны для поиска.

**Шаги**:

1. Перейдите в [AACSearch Dashboard](https://dashboard.aacsearch.com).
2. Выберите нужный индекс и проверьте его статус в разделе "Обзор" или "Overview".
3. Убедитесь, что количество объектов в индексе соответствует ожидаемому.
4. Выполните тестовый поисковый запрос, чтобы проверить доступность данных.

## Мониторинг производительности

**Описание**: Регулярный мониторинг производительности помогает выявить проблемы до того, как они повлияют на пользователей.

**Шаги**:

1. Используйте раздел "Аналитика" в панели управления для отслеживания времени ответа на запросы.
2. Настройте уведомления о превышении порогового времени ответа (если доступно в вашем плане).
3. Используйте внешние инструменты мониторинга для проверки доступности API с разных географических точек.

## Автоматизация проверок состояния

**Описание**: Автоматизация проверок состояния позволяет оперативно реагировать на проблемы.

**Пример для Bash-скрипта**:

```bash
#!/bin/bash
API_KEY="ваш-api-ключ"
RESPONSE=$(curl -s -X GET "https://api.aacsearch.com/health" -H "X-API-Key: $API_KEY")
if [[ $RESPONSE == *"status\": \"ok"* ]]; then
  echo "API работает нормально"
else
  echo "Проблема с API: $RESPONSE"
  # Отправка уведомления (например, через email или Slack)
fi
```

**Пример для JavaScript (Node.js)**:

```javascript
const fetch = require("node-fetch");

async function checkHealth() {
  const response = await fetch("https://api.aacsearch.com/health", {
    headers: { "X-API-Key": "ваш-api-ключ" },
  });
  const data = await response.json();
  if (data.status === "ok") {
    console.log("API работает нормально");
  } else {
    console.error("Проблема с API:", data);
    // Отправка уведомления
  }
}

checkHealth();
```

## Дополнительные ресурсы

- [Официальная документация API](./../api/quickstart.md)
- [Примеры кода](./../examples/README.md)
