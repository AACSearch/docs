# Пользовательское ранжирование

Пользовательское ранжирование в AACSearch позволяет настраивать порядок отображения результатов поиска на основе специфических бизнес-правил или пользовательских предпочтений. Этот раздел объясняет, как создать и применять пользовательские правила ранжирования для достижения желаемых результатов.

## Зачем нужно пользовательское ранжирование

AACSearch по умолчанию использует алгоритмы ранжирования, основанные на текстовой релевантности и других факторах. Однако в некоторых случаях требуется учитывать дополнительные критерии, такие как:

- **Бизнес-приоритеты**: Продвижение определенных продуктов или контента (например, товаров со скидкой или новых поступлений).
- **Пользовательские предпочтения**: Учет истории поиска или поведения пользователя для персонализации.
- **Контекстные факторы**: Приоритет результатов на основе времени суток, местоположения или других условий.

## Настройка пользовательского ранжирования

AACSearch предоставляет гибкие инструменты для настройки ранжирования через API или панель управления:

1. **Определение пользовательских правил**  
   Создайте правила для повышения или понижения объектов на основе условий.

   ```json
   {
     "customRanking": [
       "desc(discount_percentage)", // Сначала товары с наибольшей скидкой
       "asc(price)", // Затем по возрастанию цены
       "desc(popularity)" // Затем по популярности
     ]
   }
   ```

2. **Условные правила**  
   Применяйте правила только при выполнении определенных условий.

   ```json
   {
     "conditionalRanking": {
       "condition": "category:electronics",
       "ranking": ["desc(new_arrival_date)"]
     }
   }
   ```

3. **Персонализация на основе пользовательских данных**  
   Используйте данные пользователя для изменения порядка результатов.
   ```json
   {
     "userData": {
       "userId": "user123",
       "preferred_categories": ["electronics", "books"]
     },
     "personalization": {
       "enabled": true,
       "impact": 0.4 // Влияние персонализации на результаты (0.0 - 1.0)
     }
   }
   ```

## Примеры пользовательского ранжирования

- **E-commerce**: Повышение товаров со скидкой или новых поступлений в результатах поиска.
- **Контентные сайты**: Приоритет новых статей или материалов из любимых категорий пользователя.
- **Геопоиск**: Приоритет ближайших объектов при поиске по местоположению.

## Тестирование и оптимизация

- Используйте A/B-тестирование для сравнения разных правил ранжирования и их влияния на пользовательский опыт.
- Анализируйте данные аналитики AACSearch, чтобы оценить, как пользовательское ранжирование влияет на клики и конверсии.
- Постоянно обновляйте правила на основе обратной связи и изменений в бизнес-целях.

Для более детальной информации о пользовательском ранжировании обратитесь к [руководству по алгоритмам ранжирования](./ranking.md) и [машинному обучению](./ml.md).
