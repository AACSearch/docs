# API объектов

API объектов позволяет управлять данными в ваших индексах AACSearch. Объекты - это отдельные записи или документы, которые вы храните в индексе для поиска. Этот API предоставляет конечные точки для добавления, обновления и удаления объектов.

## Обзор

Объекты представляют собой содержимое, доступное для поиска в ваших индексах. Используя API объектов, вы можете заполнять свои индексы данными, обновлять существующие записи и удалять устаревший или нерелевантный контент.

- **Базовая конечная точка**: `/indexes/{name}/objects`
- **Аутентификация**: Требуется API-ключ, передаваемый в заголовке как `X-API-Key`.

## Добавление объектов

Добавление новых объектов в индекс для поиска.

- **Конечная точка**: `POST /indexes/{name}/objects`
- **Описание**: Добавляет один или несколько объектов в указанный индекс. Каждый объект должен иметь уникальное поле `id` для идентификации в индексе.

### Запрос (Один объект)

```bash
curl -X POST "https://api.aacsearch.com/indexes/продукты/objects" \
  -H "X-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{"id": "1", "title": "Смартфон Модель X", "description": "Последняя модель с продвинутыми функциями.", "category": "электроника", "price": 699.99}'
```

### Ответ (Один объект)

```json
{
  "id": "1",
  "index": "продукты",
  "status": "added",
  "details": {
    "title": "Смартфон Модель X",
    "description": "Последняя модель с продвинутыми функциями.",
    "category": "электроника",
    "price": 699.99
  }
}
```

### Запрос (Пакет объектов)

Вы можете добавить несколько объектов в одном запросе, отправив массив:

```bash
curl -X POST "https://api.aacsearch.com/indexes/продукты/objects" \
  -H "X-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '[
    {"id": "2", "title": "Смартфон Модель Y", "description": "Доступный смартфон с отличной производительностью.", "category": "электроника", "price": 399.99},
    {"id": "3", "title": "Смартфон Модель Z", "description": "Премиум смартфон с передовыми технологиями.", "category": "электроника", "price": 999.99}
  ]'
```

### Ответ (Пакет объектов)

```json
{
  "index": "продукты",
  "status": "batch_added",
  "count": 2,
  "objectIDs": ["2", "3"]
}
```

## Обновление объектов

Обновление существующих объектов в индексе.

- **Конечная точка**: `PUT /indexes/{name}/objects/{id}`
- **Описание**: Обновляет указанный объект в индексе. Обновляются только предоставленные поля; опущенные поля остаются без изменений.

### Запрос

```bash
curl -X PUT "https://api.aacsearch.com/indexes/продукты/objects/1" \
  -H "X-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{"price": 749.99, "description": "Обновленная модель с улучшенными функциями."}'
```

### Ответ

```json
{
  "id": "1",
  "index": "продукты",
  "status": "updated",
  "details": {
    "price": 749.99,
    "description": "Обновленная модель с улучшенными функциями."
  }
}
```

## Удаление объектов

Удаление объектов из индекса.

- **Конечная точка**: `DELETE /indexes/{name}/objects/{id}`
- **Описание**: Удаляет указанный объект из индекса.

### Запрос

```bash
curl -X DELETE "https://api.aacsearch.com/indexes/продукты/objects/1" \
  -H "X-API-Key: your-api-key"
```

### Ответ

```json
{
  "id": "1",
  "index": "продукты",
  "status": "deleted"
}
```

## Пакетные операции

AACSearch поддерживает пакетные операции для добавления, обновления или удаления нескольких объектов в одном запросе для оптимизации производительности.

- **Конечная точка**: `POST /indexes/{name}/objects/batch`
- **Описание**: Выполняет несколько операций (добавление, обновление, удаление) над объектами в одном запросе.

### Запрос (Пакетные операции)

```bash
curl -X POST "https://api.aacsearch.com/indexes/продукты/objects/batch" \
  -H "X-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "requests": [
      {"action": "addObject", "body": {"id": "4", "title": "Планшет Модель A", "category": "электроника", "price": 299.99}},
      {"action": "updateObject", "body": {"id": "2", "price": 449.99}},
      {"action": "deleteObject", "body": {"id": "3"}}
    ]
  }'
```

### Ответ (Пакетные операции)

```json
{
  "index": "продукты",
  "status": "batch_processed",
  "count": 3,
  "results": [
    { "id": "4", "action": "addObject", "status": "added" },
    { "id": "2", "action": "updateObject", "status": "updated" },
    { "id": "3", "action": "deleteObject", "status": "deleted" }
  ]
}
```

## Лучшие практики управления объектами

- **Уникальные ID**: Убедитесь, что каждый объект имеет уникальный `id`, чтобы предотвратить непреднамеренную перезапись существующих данных.
- **Пакетные операции**: Используйте пакетные запросы для массовых операций, чтобы уменьшить количество вызовов API и повысить производительность.
- **Структура данных**: Структурируйте ваши объекты единообразно с полями, соответствующими атрибутам для поиска и фильтрации, определенным в настройках индекса. Смотрите [API настроек](./settings.md) для деталей конфигурации.
- **Инкрементальные обновления**: Для больших наборов данных обновляйте объекты постепенно, чтобы избежать таймаутов или проблем с ограничением скорости.

## Устранение неисправностей

Если вы столкнулись с проблемами при управлении объектами:

- Убедитесь, что ваш API-ключ имеет необходимые разрешения для добавления, обновления или удаления объектов.
- Проверьте, что ID объектов уникальны при добавлении новых объектов, чтобы избежать перезаписи существующих.
- Ознакомьтесь с разделом [Ошибки API](../troubleshooting/api-errors.md) для конкретных кодов ошибок и решений.
- Используйте [Режим отладки](../troubleshooting/debug.md) для получения подробных логов для диагностики проблем.

## Дополнительные ресурсы

- [Дашборд AACSearch](https://dashboard.aacsearch.com) - Управление объектами визуально через дашборд.
- [Площадка API](https://api.aacsearch.com/playground) - Интерактивное тестирование вызовов API управления объектами.
- [Руководство по управлению индексами](../guides/dashboard/indexes.md) - Узнайте, как управлять данными в индексах через дашборд.
- [API настроек](./settings.md) - Подробная документация по настройке атрибутов для поиска и фильтрации.
